<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PerlinNoise three</title>
    <style>
      canvas {
        border: 1px solid black;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"></canvas>
  </body>
  <script src=""></script>

  <script>
    function Circle({x, y, radius, velocity, median}) {
      this.x = x;
      this.y = y;
      this.radius = radius;
      this.velocity = velocity;
      this.circleMove = this.radius;
      this.median = median;

      this.draw = () => {
        // console.log(this.x, this.y, this.radius);
        // console.log("batatas");
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
        ctx.stroke();
        ctx.fillStyle = "#FF0000";
        ctx.fill();
        ctx.closePath();
      };

      this.update = () => {
        if (this.median > 0) this.median -= 0.03;
        this.x += Math.cos(this.circleMove) * this.median;
        this.y += Math.sin(this.circleMove) * this.median;

        this.circleMove += this.velocity;
        this.draw();
      };
    }

    const canvas = document.getElementById("canvas");
    canvas.width = window.innerWidth / 1;
    canvas.height = window.innerHeight / 1;
    var ctx = canvas.getContext("2d");

    let circlesArray = [];

    for (let i = 0; i < 20; i++) {
      let radius = Math.random(3) * 30;
      let median = Math.random(3) * 9;
      let x = Math.random() * (canvas.width - radius * 2) + radius;
      let y = Math.random() * (canvas.height - radius * 2) + radius;
      let velocity = Math.random() * 0.9;

      circlesArray.push(new Circle({x, y, velocity, radius, median}));
    }

    (function animate() {
      ctx.fillStyle = "rgba(255, 255, 255, 0.2)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      circlesArray.map((circle) => {
        circle.update();
      });

      requestAnimationFrame(animate);
    })();
  </script>
</html>
